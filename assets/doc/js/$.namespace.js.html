<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: $.namespace.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: $.namespace.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/*
 * $.namespace.js
 * Copyright (c) 2014 daikiueda, @ue_di
 * Licensed under the MIT license.
 * https://github.com/daikiueda/static-site-scaffold
 */
(function( global ){
    "use strict";

    var NAMESPACE_ROOT_STRING = "siteScript",
        ATTR_NAME_FOR_GLOBAL_VARIABLE = "data-namespace",

        // namespaceメソッドを保持させる$オブジェクトの決定。
        // jQueryの使用を想定している。
        // jQueryが存在しない場合は、グローバルスコープに変数$を定義する。
        /** @namespace $ */
        $ = global.$ = ( global.$ ) ? global.$: {},

        // 名前空間の実体となるハッシュ。
        namespace = {},

        loaderScriptElm,
        globalNamespaceStr;

    if( $.namespace ){
        throw new Error( "$.namespaceの定義に失敗しました。scriptファイルの構成が想定外です。" );
    }

    if( namespace[ NAMESPACE_ROOT_STRING ] ){
        throw new Error( "名前空間の初期化が複数回実行されようとしています。" );
    }

    namespace[ NAMESPACE_ROOT_STRING ] = {};

    /**
     * 名前空間の階層を定義する。
     * @name $.namespace
     * @function
     * @param {String} namesHierarchy ex. "siteScript.utils.validator" or "siteScript/utils/validator"
     */
    $.namespace = function( namesHierarchy ){
        var spaceNames,
            testHierarchy,
            testName;

            if( namesHierarchy.indexOf( NAMESPACE_ROOT_STRING ) !== 0 ){
            throw new Error( [
                "名前空間の定義に失敗しました。",
                "ルート階層が「" + NAMESPACE_ROOT_STRING + "」ではありません。",
                "（" + namesHierarchy + "）"
            ].join( "" ) );
        }

        testHierarchy = namespace;
        spaceNames = namesHierarchy.split( /[\.\/]/ );
        do {
            testName = spaceNames.shift();
            if( !testHierarchy[ testName ] ){
                testHierarchy[ testName ] = {};
            }
            testHierarchy = testHierarchy[ testName ];
        } while( spaceNames.length );
    };

    /**
     * 名前空間のルート階層を返却する。
     * @name $.namespace.getRoot
     * @function
     * @returns {Object}
     */
    $.namespace.getRoot = function(){
        return namespace[ NAMESPACE_ROOT_STRING ];
    };

    // 当scriptを呼び出す&lt;script>要素にdata-namespace属性が設定されている場合は、
    // 属性値の文字列を名前とする変数をグローバルスコープに設け、そこに名前空間を公開する。
    if( global.document ){
        loaderScriptElm =
            [].slice.apply( global.document.getElementsByTagName( "script" ) ).pop();

        globalNamespaceStr = loaderScriptElm.getAttribute( ATTR_NAME_FOR_GLOBAL_VARIABLE );

        if( globalNamespaceStr ){
            global[ globalNamespaceStr ] = namespace[ NAMESPACE_ROOT_STRING ];
        }
    }
})( window );
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Namespaces</h3><ul><li><a href="$.html">$</a></li><li><a href="siteScript.html">siteScript</a></li><li><a href="siteScript.utils.html">utils</a></li><li><a href="siteScript.utils.validation.html">validation</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Wed Apr 16 2014 00:43:11 GMT+0900 (JST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
